import{c as S,r as t,u as C,j as a,L as k}from"./index-Cwgo8lsz.js";import{T as I}from"./action-B0BG8J-I.js";import{a as L}from"./axios-BxgaBfug.js";import{L as E}from"./switcherdata-CwHaD5Ha.js";import{S as h}from"./spk-button-CNgHgY8w.js";import{u as T}from"./contextapi-CGRcXlS9.js";import"./spk-badge-CitHwdXb.js";const $=({ThemeChanger:n})=>{const{setpageloading:g,setAuthToken:f,setUser:j}=T(),[o,b]=t.useState(!1),[d,l]=t.useState(""),[i,v]=t.useState({email:"",password:""}),{email:c,password:m}=i,N=C(),p=s=>{v({...i,[s.target.name]:s.target.value}),l("")},y=()=>{N("/dashboards/corporate/")},w=async s=>{var u,x;s.preventDefault(),l("");const r=btoa(`${c}:${m}`);try{const e=await L.get("https://app.ddin.rw/api/v1/authentication/login",{headers:{Authorization:`Basic ${r}`,"Content-Type":"application/json"}});e.data&&(j({id:e.data.data.id,name:e.data.data.id,email:e.data.data.id,phone:e.data.data.id,username:e.data.data.username}),f(r),localStorage.setItem("token",JSON.stringify(r)),localStorage.setItem("userData",JSON.stringify({id:e.data.data.id,accountId:e.data.data.agentFloatAccountId,email:e.data.data.email,name:e.data.data.name,username:e.data.data.username,role:e.data.data.agentCategory}))),y()}catch(e){console.error(e),l(((x=(u=e.response)==null?void 0:u.data)==null?void 0:x.responseDescription)||"Login failed. Please try again.")}};return t.useEffect(()=>{E(n,g)},[]),a.jsx(t.Fragment,{children:a.jsx("div",{className:"container",children:a.jsx("div",{className:"authentication authentication-basic items-center h-full text-defaultsize text-defaulttextcolor flex",children:a.jsxs("div",{className:"grid grid-cols-12 w-full",children:[a.jsx("div",{className:"xxl:col-span-4 xl:col-span-4 lg:col-span-4 md:col-span-3 sm:col-span-2"}),a.jsx("div",{className:"xxl:col-span-4 xl:col-span-4 lg:col-span-4 md:col-span-6 sm:col-span-8 col-span-12",children:a.jsx("div",{className:"box",children:a.jsxs("div",{className:"box-body !p-[3rem]",children:[a.jsx("p",{className:"h5 font-semibold mb-2 text-center",children:"Sign In"}),d&&a.jsx("div",{className:"alert-danger px-4 py-3 shadow-md mb-2",children:a.jsx("div",{className:"flex",children:a.jsx("div",{children:d})})}),a.jsx("form",{onSubmit:w,children:a.jsxs("div",{className:"grid grid-cols-12 gap-y-4",children:[a.jsxs("div",{className:"xl:col-span-12 col-span-12",children:[a.jsx("label",{className:"form-label text-default",children:"Username"}),a.jsx("input",{type:"text",name:"email",className:"form-control form-control-lg w-full !rounded-md",onChange:p,value:c,placeholder:"Enter username",required:!0})]}),a.jsxs("div",{className:"xl:col-span-12 col-span-12 mb-2",children:[a.jsxs("label",{className:"form-label text-default block",children:["Password",a.jsx(k,{to:"#",className:"float-end text-danger",children:"Forget password?"})]}),a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:o?"text":"password",className:"form-control form-control-lg !rounded-s-md",name:"password",placeholder:"Enter password",value:m,onChange:p,required:!0}),a.jsx(h,{variant:"light",onclickfunc:()=>b(!o),Label:"button",customClass:"ti-btn !rounded-s-none !mb-0",buttontype:"button",Id:"button-addon2",children:a.jsx("i",{className:`${o?"ri-eye-line":"ri-eye-off-line"} align-middle`})})]})]}),a.jsx("div",{className:"xl:col-span-12 col-span-12 grid mt-2",children:a.jsx(h,{variant:"primary",customClass:"ti-btn !bg-primary !text-white !font-medium",buttontype:"submit",children:"Sign In"})})]})})]})})}),a.jsx("div",{className:"xxl:col-span-4 xl:col-span-4 lg:col-span-4 md:col-span-3 sm:col-span-2"})]})})})})},A=n=>({local_variable:n}),J=S(A,{ThemeChanger:I})($);export{J as default};
