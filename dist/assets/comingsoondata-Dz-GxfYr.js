import{r as y,j as l}from"./index-Cwgo8lsz.js";import{p as s}from"./index-C9tR76Np.js";function w(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function k(n,r){for(var o=0;o<r.length;o++){var t=r[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function x(n,r,o){return r&&k(n.prototype,r),n}function O(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),r&&g(n,r)}function S(n){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},S(n)}function g(n,r){return g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},g(n,r)}function A(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function R(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function I(n,r){return r&&(typeof r=="object"||typeof r=="function")?r:R(n)}function j(n){var r=A();return function(){var t=S(n),e;if(r){var i=S(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return I(this,e)}}function z(n){return $(n)||U(n)||H(n)||L()}function $(n){if(Array.isArray(n))return D(n)}function U(n){if(typeof Symbol<"u"&&Symbol.iterator in Object(n))return Array.from(n)}function H(n,r){if(n){if(typeof n=="string")return D(n,r);var o=Object.prototype.toString.call(n).slice(8,-1);if(o==="Object"&&n.constructor&&(o=n.constructor.name),o==="Map"||o==="Set")return Array.from(n);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return D(n,r)}}function D(n,r){(r==null||r>n.length)&&(r=n.length);for(var o=0,t=new Array(r);o<r;o++)t[o]=n[o];return t}function L(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2,o=String(n);if(r===0)return o;var t=o.match(/(.*?)([0-9]+)(.*)/),e=t?t[1]:"",i=t?t[3]:"",a=t?t[2]:o,c=a.length>=r?a:(z(Array(r)).map(function(){return"0"}).join("")+a).slice(r*-1);return"".concat(e).concat(c).concat(i)}var _={daysInHours:!1,zeroPadTime:2};function W(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.now,t=o===void 0?Date.now:o,e=r.precision,i=e===void 0?0:e,a=r.controlled,c=r.offsetTime,u=c===void 0?0:c,f=r.overtime,m;typeof n=="string"?m=new Date(n).getTime():n instanceof Date?m=n.getTime():m=n,a||(m+=u);var p=a?m:m-t(),d=Math.min(20,Math.max(0,i)),v=Math.round(parseFloat(((f?p:Math.max(0,p))/1e3).toFixed(d))*1e3),h=Math.abs(v)/1e3;return{total:v,days:Math.floor(h/(3600*24)),hours:Math.floor(h/3600%24),minutes:Math.floor(h/60%60),seconds:Math.floor(h%60),milliseconds:Number((h%1*1e3).toFixed()),completed:v<=0}}function F(n,r){var o=n.days,t=n.hours,e=n.minutes,i=n.seconds,a=Object.assign(Object.assign({},_),r),c=a.daysInHours,u=a.zeroPadTime,f=a.zeroPadDays,m=f===void 0?u:f,p=Math.min(2,u),d=c?T(t+o*24,u):T(t,p);return{days:c?"":T(o,m),hours:d,minutes:T(e,p),seconds:T(i,p)}}var C=function(n){O(o,n);var r=j(o);function o(){var t;return w(this,o),t=r.apply(this,arguments),t.state={count:t.props.count||3},t.startCountdown=function(){t.interval=window.setInterval(function(){var e=t.state.count-1;e===0?(t.stopCountdown(),t.props.onComplete&&t.props.onComplete()):t.setState(function(i){return{count:i.count-1}})},1e3)},t.stopCountdown=function(){clearInterval(t.interval)},t.addTime=function(e){t.stopCountdown(),t.setState(function(i){return{count:i.count+e}},t.startCountdown)},t}return x(o,[{key:"componentDidMount",value:function(){this.startCountdown()}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return this.props.children?y.cloneElement(this.props.children,{count:this.state.count}):null}}]),o}(y.Component);C.propTypes={count:s.number,children:s.element,onComplete:s.func};var b=function(n){O(o,n);var r=j(o);function o(t){var e;if(w(this,o),e=r.call(this,t),e.mounted=!1,e.initialTimestamp=e.calcOffsetStartTimestamp(),e.offsetStartTimestamp=e.props.autoStart?0:e.initialTimestamp,e.offsetTime=0,e.legacyMode=!1,e.legacyCountdownRef=null,e.tick=function(){var a=e.calcTimeDelta(),c=a.completed&&!e.props.overtime?void 0:e.props.onTick;e.setTimeDeltaState(a,void 0,c)},e.setLegacyCountdownRef=function(a){e.legacyCountdownRef=a},e.start=function(){if(!e.isStarted()){var a=e.offsetStartTimestamp;e.offsetStartTimestamp=0,e.offsetTime+=a?e.calcOffsetStartTimestamp()-a:0;var c=e.calcTimeDelta();e.setTimeDeltaState(c,"STARTED",e.props.onStart),!e.props.controlled&&(!c.completed||e.props.overtime)&&(e.clearTimer(),e.interval=window.setInterval(e.tick,e.props.intervalDelay))}},e.pause=function(){e.isPaused()||(e.clearTimer(),e.offsetStartTimestamp=e.calcOffsetStartTimestamp(),e.setTimeDeltaState(e.state.timeDelta,"PAUSED",e.props.onPause))},e.stop=function(){e.isStopped()||(e.clearTimer(),e.offsetStartTimestamp=e.calcOffsetStartTimestamp(),e.offsetTime=e.offsetStartTimestamp-e.initialTimestamp,e.setTimeDeltaState(e.calcTimeDelta(),"STOPPED",e.props.onStop))},e.isStarted=function(){return e.isStatus("STARTED")},e.isPaused=function(){return e.isStatus("PAUSED")},e.isStopped=function(){return e.isStatus("STOPPED")},e.isCompleted=function(){return e.isStatus("COMPLETED")},t.date){var i=e.calcTimeDelta();e.state={timeDelta:i,status:i.completed?"COMPLETED":"STOPPED"}}else e.legacyMode=!0;return e}return x(o,[{key:"componentDidMount",value:function(){this.legacyMode||(this.mounted=!0,this.props.onMount&&this.props.onMount(this.calcTimeDelta()),this.props.autoStart&&this.start())}},{key:"componentDidUpdate",value:function(e){this.legacyMode||this.props.date!==e.date&&(this.initialTimestamp=this.calcOffsetStartTimestamp(),this.offsetStartTimestamp=this.initialTimestamp,this.offsetTime=0,this.setTimeDeltaState(this.calcTimeDelta()))}},{key:"componentWillUnmount",value:function(){this.legacyMode||(this.mounted=!1,this.clearTimer())}},{key:"calcTimeDelta",value:function(){var e=this.props,i=e.date,a=e.now,c=e.precision,u=e.controlled,f=e.overtime;return W(i,{now:a,precision:c,controlled:u,offsetTime:this.offsetTime,overtime:f})}},{key:"calcOffsetStartTimestamp",value:function(){return Date.now()}},{key:"addTime",value:function(e){this.legacyCountdownRef.addTime(e)}},{key:"clearTimer",value:function(){window.clearInterval(this.interval)}},{key:"isStatus",value:function(e){return this.state.status===e}},{key:"setTimeDeltaState",value:function(e,i,a){var c=this;if(this.mounted){var u=e.completed&&!this.state.timeDelta.completed,f=e.completed&&i==="STARTED";u&&!this.props.overtime&&this.clearTimer();var m=function(){a&&a(c.state.timeDelta),c.props.onComplete&&(u||f)&&c.props.onComplete(e,f)};return this.setState(function(p){var d=i||p.status;return e.completed&&!c.props.overtime?d="COMPLETED":!i&&d==="COMPLETED"&&(d="STOPPED"),{timeDelta:e,status:d}},m)}}},{key:"getApi",value:function(){return this.api=this.api||{start:this.start,pause:this.pause,stop:this.stop,isStarted:this.isStarted,isPaused:this.isPaused,isStopped:this.isStopped,isCompleted:this.isCompleted}}},{key:"getRenderProps",value:function(){var e=this.props,i=e.daysInHours,a=e.zeroPadTime,c=e.zeroPadDays,u=this.state.timeDelta;return Object.assign(Object.assign({},u),{api:this.getApi(),props:this.props,formatted:F(u,{daysInHours:i,zeroPadTime:a,zeroPadDays:c})})}},{key:"render",value:function(){if(this.legacyMode){var e=this.props,i=e.count,a=e.children,c=e.onComplete;return y.createElement(C,{ref:this.setLegacyCountdownRef,count:i,onComplete:c},a)}var u=this.props,f=u.className,m=u.overtime,p=u.children,d=u.renderer,v=this.getRenderProps();if(d)return d(v);if(p&&this.state.timeDelta.completed&&!m)return y.cloneElement(p,{countdown:v});var h=v.formatted,P=h.days,E=h.hours,M=h.minutes,N=h.seconds;return y.createElement("span",{className:f},v.total<0?"-":"",P,P?":":"",E,":",M,":",N)}}]),o}(y.Component);b.defaultProps=Object.assign(Object.assign({},_),{controlled:!1,intervalDelay:1e3,precision:0,autoStart:!0});b.propTypes={date:s.oneOfType([s.instanceOf(Date),s.string,s.number]),daysInHours:s.bool,zeroPadTime:s.number,zeroPadDays:s.number,controlled:s.bool,intervalDelay:s.number,precision:s.number,autoStart:s.bool,overtime:s.bool,className:s.string,children:s.element,renderer:s.func,now:s.func,onMount:s.func,onStart:s.func,onPause:s.func,onStop:s.func,onTick:s.func,onComplete:s.func};const Y=()=>l.jsx("span",{children:"You are good to go!"}),V=({days:n,hours:r,minutes:o,seconds:t,completed:e})=>e?l.jsx(Y,{}):l.jsxs("div",{className:"grid grid-cols-12 mt-6 mb-[3rem] xxl:gap-y-0 gap-4 justify-center",children:[l.jsx("div",{className:"xxl:col-span-3 xl:col-span-6 lg:col-span-6 md:col-span-3 sm:col-span-3 col-span-6",children:l.jsxs("div",{className:"p-3 under-maintenance-time rounded",children:[l.jsx("p",{className:"mb-1 fs-12 op-5",children:"DAYS"}),l.jsx("h4",{className:"fw-semibold mb-0",children:n})]})}),l.jsx("div",{className:"xxl:col-span-3 xl:col-span-6 lg:col-span-6 md:col-span-3 sm:col-span-3 col-span-6",children:l.jsxs("div",{className:"p-3 under-maintenance-time rounded",children:[l.jsx("p",{className:"mb-1 fs-12 op-5",children:"HOURS"}),l.jsx("h4",{className:"fw-semibold mb-0",children:r})]})}),l.jsx("div",{className:"xxl:col-span-3 xl:col-span-6 lg:col-span-6 md:col-span-3 sm:col-span-3 col-span-6",children:l.jsxs("div",{className:"p-3 under-maintenance-time rounded",children:[l.jsx("p",{className:"mb-1 fs-12 op-5",children:"MINUTES"}),l.jsx("h4",{className:"fw-semibold mb-0",children:o})]})}),l.jsx("div",{className:"xxl:col-span-3 xl:col-span-6 lg:col-span-6 md:col-span-3 sm:col-span-3 col-span-6",children:l.jsxs("div",{className:"p-3 under-maintenance-time rounded",children:[l.jsx("p",{className:"mb-1 fs-12 op-5",children:"SECONDS"}),l.jsx("h4",{className:"fw-semibold mb-0",children:t})]})})]});function G(){return l.jsx(b,{date:Date.now()+850059e4,renderer:V})}export{G as D};
